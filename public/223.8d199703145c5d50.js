"use strict";(self.webpackChunk_01=self.webpackChunk_01||[]).push([[223],{2223:(gt,C,l)=>{l.r(C),l.d(C,{ChildRoutesModule:()=>mt});var p=l(341),t=l(4946);let M=(()=>{class r{static#t=this.\u0275fac=function(i){return new(i||r)};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-dashoboard"]],decls:2,vars:0,template:function(i,o){1&i&&(t.TgZ(0,"p"),t._uU(1,"dashoboard works!"),t.qZA())},encapsulation:2})}return r})(),y=(()=>{class r{static#t=this.\u0275fac=function(i){return new(i||r)};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-grafica1"]],decls:2,vars:0,template:function(i,o){1&i&&(t.TgZ(0,"p"),t._uU(1,"grafica1 works!"),t.qZA())},encapsulation:2})}return r})();var a=l(95);let I=(()=>{class r{constructor(){this.progress=30,this.btnClass="btn btn-warning",this.emisor=new t.vpe}restar(){this.progress<=0?(this.progress=0,this.emisor.emit(this.progress)):(this.progress-=10,this.emisor.emit(this.progress))}sumar(){this.progress>=100?(this.progress=100,this.emisor.emit(this.progress)):(this.progress+=10,this.emisor.emit(this.progress))}static#t=this.\u0275fac=function(i){return new(i||r)};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-incrementador"]],inputs:{progress:["valor","progress"],btnClass:"btnClass"},outputs:{emisor:"emisor"},decls:8,vars:5,consts:[[1,"input-group"],[1,"input-group-btn"],["type","button",3,"click"],[1,"fa","fa-minus"],["type","number",1,"form-control","text-center",3,"ngModel","ngModelChange"],[1,"fa","fa-plus"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0)(1,"span",1)(2,"button",2),t.NdJ("click",function(){return o.restar()}),t._UZ(3,"i",3),t.qZA()(),t.TgZ(4,"input",4),t.NdJ("ngModelChange",function(n){return o.progress=n}),t.qZA(),t.TgZ(5,"span",1)(6,"button",2),t.NdJ("click",function(){return o.sumar()}),t._UZ(7,"i",5),t.qZA()()()),2&i&&(t.xp6(2),t.Tol(o.btnClass),t.xp6(2),t.Q6J("ngModel",o.progress),t.xp6(2),t.Tol(o.btnClass))},dependencies:[a.Fj,a.wV,a.JJ,a.On],encapsulation:2})}return r})(),J=(()=>{class r{constructor(){this.progress1=80,this.progress2=30}changeProgress1(e){this.progress1=e}changeProgress2(e){this.progress2=e}static#t=this.\u0275fac=function(i){return new(i||r)};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-progress"]],decls:23,vars:8,consts:[[1,"row"],[1,"col-12"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"progress","m-t-20"],["role","progressbar","active","",1,"progress-bar","bg-info","progress-bar-striped",2,"height","10px"],[1,"sr-only"],["role","progressbar","active","",1,"progress-bar","bg-primary","progress-bar-striped",2,"height","10px"],[1,"col-6"],[3,"valor","btnClass","emisor"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),t._uU(5,"Striped Progress bar "),t.qZA(),t.TgZ(6,"div",5)(7,"div",6)(8,"span",7),t._uU(9,"85% Complete (success)"),t.qZA()()(),t.TgZ(10,"div",5)(11,"div",8)(12,"span",7),t._uU(13,"85% Complete (success)"),t.qZA()()()()()()(),t.TgZ(14,"div",0)(15,"div",9)(16,"div",2)(17,"div",3)(18,"app-incrementador",10),t.NdJ("emisor",function(n){return o.progress1=n}),t.qZA()()()(),t.TgZ(19,"div",9)(20,"div",2)(21,"div",3)(22,"app-incrementador",10),t.NdJ("emisor",function(n){return o.progress2=n}),t.qZA()()()()()),2&i&&(t.xp6(7),t.Udp("width",o.progress1+"%"),t.xp6(4),t.Udp("width",o.progress2+"%"),t.xp6(7),t.Q6J("valor",o.progress1)("btnClass","btn btn-danger"),t.xp6(4),t.Q6J("valor",o.progress2)("btnClass","btn btn-primary"))},dependencies:[I],styles:[".progress.active[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%], .progress-bar.active[_ngcontent-%COMP%]{animation:progress-bar-stripes 2s linear infinite}.progress-vertical[_ngcontent-%COMP%]{min-height:250px;height:250px;position:relative;display:inline-block;margin-bottom:0;margin-right:20px}.progress-vertical-bottom[_ngcontent-%COMP%]{min-height:250px;height:250px;position:relative;display:inline-block;margin-bottom:0;margin-right:20px;transform:rotate(180deg)}.progress-animated[_ngcontent-%COMP%]{-webkit-animation-duration:5s;-webkit-animation-name:_ngcontent-%COMP%_myanimation;-webkit-transition:5s all;animation-duration:5s;animation-name:_ngcontent-%COMP%_myanimation;transition:5s all}@keyframes _ngcontent-%COMP%_myanimation{0%{width:0}}"]})}return r})(),S=(()=>{class r{ngOnInit(){this.getUsuarios()}getUsuarios(){fetch("https://reqres.in/api/users?page=2").then(e=>{e.json().then(i=>console.log(i.data))})}static#t=this.\u0275fac=function(i){return new(i||r)};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-promesas"]],decls:2,vars:0,template:function(i,o){1&i&&(t.TgZ(0,"p"),t._uU(1,"promesas works!"),t.qZA())},encapsulation:2})}return r})(),k=(()=>{class r{static#t=this.\u0275fac=function(i){return new(i||r)};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-rxjs"]],decls:2,vars:0,template:function(i,o){1&i&&(t.TgZ(0,"p"),t._uU(1,"rxjs works!"),t.qZA())},encapsulation:2})}return r})();var w=l(3519),u=l.n(w),b=l(7696),N=l(1476);let H=(()=>{class r{constructor(e,i,o){this.fb=e,this.usuarioService=i,this.fileUploadService=o,this.usuario=this.usuarioService.usuario}ngOnInit(){this.perfilForm=this.fb.group({nombre:[this.usuario.nombre,a.kI.required],email:[this.usuario.email,[a.kI.required,a.kI.email]]})}actualizarPerfil(){this.usuarioService.actualizarPerfil(this.perfilForm.value).subscribe({next:e=>{const{nombre:i,email:o}=this.perfilForm.value;this.usuario.nombre=i,this.usuario.email=o,u().fire("Guardado","Acualizacion exitosa","success")},error:e=>{console.log(e),u().fire("Error",e.error.msg,"error")}})}cambiarImagen(e){this.imagenSubir=e.target.files[0]}subirImagen(){this.fileUploadService.actualizarFoto(this.imagenSubir,"usuarios",this.usuario.uid).then(e=>{u().fire("Guardada","Foto actualizada","success")}).catch(e=>{console.log("desde el catch",e),u().fire("Error","No se pudo subir la imagen","error")})}static#t=this.\u0275fac=function(i){return new(i||r)(t.Y36(a.qu),t.Y36(b.i),t.Y36(N.J))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-perfil"]],decls:38,vars:4,consts:[[1,"row"],[1,"col-lg-6"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"card-subtitle"],[1,"form","p-t-20",3,"formGroup"],[1,"form-group"],["for","exampleInputuname"],[1,"input-group"],[1,"input-group-addon"],[1,"ti-user"],["formControlName","nombre","type","text!","id","exampleInputuname","placeholder","Username",1,"form-control"],["for","exampleInputEmail1"],[1,"ti-email"],["formControlName","email","type","email","id","exampleInputEmail1","placeholder","Enter email",1,"form-control",3,"readOnly"],["type","button",1,"btn","btn-success","waves-effect","btn-block","waves-light","m-r-10",3,"disabled","click"],["src",""],["type","file",3,"change"],["type","button",1,"btn","btn-success","btn-block","waves-effect","waves-light","m-r-10",3,"disabled","click"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),t._uU(5,"Mi Perfil de Usuario"),t.qZA(),t.TgZ(6,"h6",5),t._uU(7,"Ajustes"),t.qZA(),t.TgZ(8,"form",6)(9,"div",7)(10,"label",8),t._uU(11,"User Name"),t.qZA(),t.TgZ(12,"div",9)(13,"div",10),t._UZ(14,"i",11),t.qZA(),t._UZ(15,"input",12),t.qZA()(),t.TgZ(16,"div",7)(17,"label",13),t._uU(18,"Email address"),t.qZA(),t.TgZ(19,"div",9)(20,"div",10),t._UZ(21,"i",14),t.qZA(),t._UZ(22,"input",15),t.qZA()(),t.TgZ(23,"button",16),t.NdJ("click",function(){return o.actualizarPerfil()}),t._uU(24," Guardar cambios "),t.qZA()()()()(),t.TgZ(25,"div",1)(26,"div",2)(27,"div",3)(28,"h4",4),t._uU(29,"Avatar"),t.qZA(),t.TgZ(30,"h6",5),t._uU(31,"Imagen del usuario"),t.qZA(),t._UZ(32,"img",17),t.TgZ(33,"input",18),t.NdJ("change",function(n){return o.cambiarImagen(n)}),t.qZA(),t._UZ(34,"br")(35,"br"),t.TgZ(36,"button",19),t.NdJ("click",function(){return o.subirImagen()}),t._uU(37," Cambiar imagen "),t.qZA()()()()()),2&i&&(t.xp6(8),t.Q6J("formGroup",o.perfilForm),t.xp6(14),t.Q6J("readOnly",o.usuario.google),t.xp6(1),t.Q6J("disabled",o.perfilForm.invalid),t.xp6(13),t.Q6J("disabled",!o.imagenSubir))},dependencies:[a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u]})}return r})();var v=l(6266),g=l(6062),h=l(7398),F=l(6898);class ${constructor(c,e,i,o){this.nombre=c,this._id=e,this.img=i,this.usuario=o}}var Z=l(9862);const U=g.a.base_url;let _=(()=>{class r{constructor(e){this.http=e}get token(){return localStorage.getItem("token")||""}get headers(){return{headers:{"x-token":this.token}}}transformarUsuarios(e){return e.map(i=>new F.b(i.nombre,i.email,i.password,i.obtenerImagenUrl,i.google,i.role,i.uid))}transformarHospitales(e){return e.map(i=>new $(i.nombre,i.img))}buscarGlobal(e){return this.http.get(`${U}/todo/${e}`,this.headers)}buscar(e,i=""){return this.http.get(`${U}/todo/coleccion/${e}/${i}`,this.headers).pipe((0,h.U)(s=>{switch(e){case"usuarios":case"medicos":return this.transformarUsuarios(s.resultado);case"hospitales":return this.transformarHospitales(s.resultado);default:return[]}}))}static#t=this.\u0275fac=function(i){return new(i||r)(t.LFG(Z.eN))};static#e=this.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var T=l(8869),d=l(6814);function Y(r,c){1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",7)(3,"h4",8),t._uU(4,"Cargando "),t.qZA(),t._UZ(5,"i",9),t.TgZ(6,"p",10),t._uU(7,"Por favor espere"),t.qZA()()()())}function O(r,c){1&r&&(t.TgZ(0,"span",30),t._uU(1," Google "),t.qZA())}function Q(r,c){1&r&&(t.TgZ(0,"span",31),t._uU(1," Email "),t.qZA())}function P(r,c){if(1&r){const e=t.EpF();t.TgZ(0,"tr")(1,"td",20)(2,"img",21),t.NdJ("click",function(){const s=t.CHM(e).$implicit,n=t.oxw(2);return t.KtG(n.abrirModal(s))}),t.qZA()(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td")(8,"select",22),t.NdJ("ngModelChange",function(o){const n=t.CHM(e).$implicit;return t.KtG(n.role=o)})("change",function(){const s=t.CHM(e).$implicit,n=t.oxw(2);return t.KtG(n.cambiarRol(s))}),t.TgZ(9,"option",23),t._uU(10," Admin "),t.qZA(),t.TgZ(11,"option",24),t._uU(12," User "),t.qZA()()(),t.TgZ(13,"td"),t.YNc(14,O,2,0,"span",25),t._uU(15," \xa0 "),t.YNc(16,Q,2,0,"span",26),t.qZA(),t.TgZ(17,"td",27)(18,"a",28),t.NdJ("click",function(){const s=t.CHM(e).$implicit,n=t.oxw(2);return t.KtG(n.eliminarUsuario(s))}),t._UZ(19,"i",29),t.qZA()()()}if(2&r){const e=c.$implicit;t.xp6(2),t.Q6J("src",e.obtenerImagenUrl,t.LSH),t.xp6(2),t.hij(" ",e.email," "),t.xp6(2),t.hij(" ",e.nombre," "),t.xp6(2),t.Q6J("ngModel",e.role),t.xp6(6),t.Q6J("ngIf",e.google),t.xp6(2),t.Q6J("ngIf",!e.google)}}function B(r,c){if(1&r){const e=t.EpF();t.TgZ(0,"div")(1,"button",32),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.cambiarPagina(-5))}),t._uU(2,"Anterior"),t.qZA(),t._uU(3," \xa0 "),t.TgZ(4,"button",32),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.cambiarPagina(5))}),t._uU(5,"Siguiente"),t.qZA()()}}function G(r,c){if(1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",11),t._uU(5),t.qZA(),t.TgZ(6,"h6",12),t._uU(7,"Usuarios registrados "),t.qZA(),t.TgZ(8,"div",13)(9,"table",14)(10,"thead")(11,"tr")(12,"th",15),t._uU(13,"Avatar"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Correo"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Nombre"),t.qZA(),t.TgZ(18,"th",16),t._uU(19,"Role"),t.qZA(),t.TgZ(20,"th",15),t._uU(21,"Auth"),t.qZA(),t.TgZ(22,"th",17),t._uU(23,"Acciones"),t.qZA()()(),t.TgZ(24,"tbody"),t.YNc(25,P,20,6,"tr",18),t.qZA()()(),t.YNc(26,B,6,0,"div",19),t.qZA()()()()),2&r){const e=t.oxw(),i=t.MAs(5);t.xp6(5),t.hij("Total de usuarios: ",e.totalUsuarios,""),t.xp6(20),t.Q6J("ngForOf",e.usuarios),t.xp6(1),t.Q6J("ngIf",0===i.value.length)}}let L=(()=>{class r{constructor(e,i,o){this.usuarioService=e,this.busquedaService=i,this.modalService=o,this.totalUsuarios=0,this.usuarios=[],this.usuariosTmp=[],this.desde=0,this.cargando=!0}ngOnDestroy(){this.subscription.unsubscribe()}ngOnInit(){this.cargarUsuarios(),this.subscription=this.modalService.nuevaImagen.pipe((0,v.g)(100)).subscribe(e=>{this.cargarUsuarios()})}cargarUsuarios(){this.cargando=!0,this.usuarioService.cargarUsuarios(this.desde).subscribe(({total:e,usuarios:i})=>{this.totalUsuarios=e,this.usuarios=i,this.usuariosTmp=i,this.cargando=!1})}cambiarPagina(e){this.desde+=e,this.desde<0?this.desde=0:this.desde>=this.totalUsuarios&&(this.desde-=e),this.cargarUsuarios()}buscar(e){0===e.trim().length&&this.cargarUsuarios(),this.busquedaService.buscar("usuarios",e).subscribe(i=>{this.usuarios=i})}eliminarUsuario(e){return e.uid===this.usuarioService.uid?u().fire({title:"No puede borrar usuario",text:"No se puede borrar a si mismo",icon:"error"}):u().fire({title:"Esta seguro?",text:`Va a borrar a ${e.nombre}`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, borrar!"}).then(i=>i.isConfirmed?this.usuarioService.eliminarUsuario(e).toPromise().then(o=>{u().fire({title:"Borrado!",text:`El usuario ${e.nombre} ha sido borrado`,icon:"success"}),this.cargarUsuarios()}):Promise.resolve())}cambiarRol(e){this.usuarioService.guardarUsuario(e).subscribe(i=>{console.log(i)})}abrirModal(e){this.modalService.abrirModal("usuarios",e.uid,e.img)}static#t=this.\u0275fac=function(i){return new(i||r)(t.Y36(b.i),t.Y36(_),t.Y36(T.$))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-usuarios"]],decls:8,vars:2,consts:[[1,"row"],[1,"col-12"],[1,"card"],[1,"card-body"],["type","text","placeholder","buscar usuario...",1,"form-control",3,"change"],["txtBuscar",""],["class","row",4,"ngIf"],[1,"alert","alert-info","text-center"],[1,"alert-heading"],[1,"fa","fa-spin","fa-refresh","fa-2x"],[1,"mb-0"],[1,"card-title"],[1,"card-subtitle"],[1,"table-responsive"],[1,"table","table-bordered"],[1,"w100"],[1,"w140"],[1,"text-nowrap","w100"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"text-center"],["alt","avatar",1,"avatar","cursor",3,"src","click"],[1,"form-control",3,"ngModel","ngModelChange","change"],["value","ADMIN_ROLE"],["value","USER_ROLE"],["class","label label-danger",4,"ngIf"],["class","label label-info",4,"ngIf"],[1,"text-nowrap","text-center"],["data-toggle","tooltip","data-original-title","Borrar",1,"cursor",3,"click"],[1,"fa","fa-close","text-danger"],[1,"label","label-danger"],[1,"label","label-info"],[1,"btn","btn-secondary",3,"click"]],template:function(i,o){if(1&i){const s=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"input",4,5),t.NdJ("change",function(){t.CHM(s);const m=t.MAs(5);return t.KtG(o.buscar(m.value))}),t.qZA()()()()(),t.YNc(6,Y,8,0,"div",6),t.YNc(7,G,27,3,"div",6)}2&i&&(t.xp6(6),t.Q6J("ngIf",o.cargando),t.xp6(1),t.Q6J("ngIf",!o.cargando))},dependencies:[a.YN,a.Kr,a.EJ,a.JJ,d.sg,d.O5,a.On],encapsulation:2})}return r})();var E=l(5861);let A=(()=>{class r{constructor(e){this.http=e,this.base_url=g.a.base_url}get token(){return localStorage.getItem("token")||""}get headers(){return{headers:{"x-token":this.token}}}cargarHospitales(){return this.http.get(`${this.base_url}/hospitales`,this.headers).pipe((0,h.U)(i=>i.hospitales))}crearHospital(e){return this.http.post(`${this.base_url}/hospitales`,{nombre:e},this.headers)}actualizarHospital(e,i){return this.http.put(`${this.base_url}/hospitales/${e}`,{nombre:i},this.headers)}borrarHospital(e){return this.http.delete(`${this.base_url}/hospitales/${e}`,this.headers)}static#t=this.\u0275fac=function(i){return new(i||r)(t.LFG(Z.eN))};static#e=this.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();const x=g.a.base_url;let f=(()=>{class r{transform(e,i){return e?e?.includes("https")?e:e?`${x}/upload/${i}/${e}`:`${x}/upload/${i}/no-image`:`${x}/upload/${i}/no-image`}static#t=this.\u0275fac=function(i){return new(i||r)};static#e=this.\u0275pipe=t.Yjl({name:"imagen",type:r,pure:!0})}return r})();function j(r,c){1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",7)(3,"h4",8),t._uU(4,"Cargando "),t.qZA(),t._UZ(5,"i",9),t.TgZ(6,"p",10),t._uU(7,"Por favor espere"),t.qZA()()()())}function z(r,c){if(1&r){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"img",23),t.NdJ("click",function(){const s=t.CHM(e).$implicit,n=t.oxw(2);return t.KtG(n.abrirModal(s))}),t.ALo(3,"imagen"),t.qZA()(),t.TgZ(4,"td")(5,"input",24),t.NdJ("ngModelChange",function(o){const n=t.CHM(e).$implicit;return t.KtG(n.nombre=o)}),t.qZA()(),t.TgZ(6,"td",25)(7,"a",26),t.NdJ("click",function(){const s=t.CHM(e).$implicit,n=t.oxw(2);return t.KtG(n.guardarCambios(s))}),t._UZ(8,"i",27),t.qZA(),t.TgZ(9,"a",28),t.NdJ("click",function(){const s=t.CHM(e).$implicit,n=t.oxw(2);return t.KtG(n.borrarHospital(s))}),t._UZ(10,"i",29),t.qZA()()()}if(2&r){const e=c.$implicit;t.xp6(2),t.Q6J("src",t.xi3(3,2,e.img,"hospitales"),t.LSH),t.xp6(3),t.Q6J("ngModel",e.nombre)}}function K(r,c){if(1&r){const e=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",0)(4,"div",11)(5,"h4",12),t._uU(6),t.qZA(),t.TgZ(7,"h6",13),t._uU(8,"Hospitales registrados"),t.qZA()(),t.TgZ(9,"div",14)(10,"div",15)(11,"button",16),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.abrirSweetAlertModal())}),t._UZ(12,"i",17),t._uU(13," Crear Hospital "),t.qZA()()()(),t.TgZ(14,"div",3)(15,"div",18)(16,"table",19)(17,"thead")(18,"tr")(19,"th",20),t._uU(20,"Foto"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"Nombre"),t.qZA(),t.TgZ(23,"th",21),t._uU(24,"Acciones"),t.qZA()()(),t.TgZ(25,"tbody"),t.YNc(26,z,11,5,"tr",22),t.qZA()()()()()()()}if(2&r){const e=t.oxw();t.xp6(6),t.hij("Hospitales (",e.lista_hospitales.length,")"),t.xp6(20),t.Q6J("ngForOf",e.lista_hospitales)}}let R=(()=>{class r{constructor(e,i,o){this.hospitalService=e,this.modalImagenService=i,this.busquedaService=o,this.lista_hospitales=[],this.cargando=!0}ngOnDestroy(){this.subscription.unsubscribe()}ngOnInit(){this.cargarHospital(),this.subscription=this.modalImagenService.nuevaImagen.pipe((0,v.g)(100)).subscribe(()=>{this.cargarHospital()})}cargarHospital(){this.cargando=!0,this.hospitalService.cargarHospitales().subscribe(e=>{this.cargando=!1,this.lista_hospitales=e})}guardarCambios(e){this.hospitalService.actualizarHospital(e._id,e.nombre).subscribe(i=>{u().fire("Actualizado",e.nombre,"success")})}borrarHospital(e){this.hospitalService.borrarHospital(e._id).subscribe(i=>{this.cargarHospital(),u().fire("Hospital borrado",e.nombre,"success")})}abrirSweetAlertModal(){var e=this;return(0,E.Z)(function*(){const i=yield u().fire({title:"Ingrese hospital a crear",input:"text",inputPlaceholder:"Ingrese el nombre",showCancelButton:!0});i.value?e.hospitalService.crearHospital(i.value).subscribe(o=>{e.cargarHospital(),u().fire(`Se creo el hospital : ${i.value}`)}):u().fire("Ingrese nombre","","error")})()}abrirModal(e){this.modalImagenService.abrirModal("hospitales",e._id,e.img)}buscar(e){0!==e.trim().length?this.busquedaService.buscar("hospitales",e).subscribe(i=>{console.log(i),this.lista_hospitales=i}):this.cargarHospital()}static#t=this.\u0275fac=function(i){return new(i||r)(t.Y36(A),t.Y36(T.$),t.Y36(_))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-hospitales"]],decls:8,vars:2,consts:[[1,"row"],[1,"col-12"],[1,"card"],[1,"card-body"],["type","text","placeholder","buscar hospital...",1,"form-control",3,"keyup"],["txtTermino",""],["class","row",4,"ngIf"],[1,"alert","alert-info","text-center"],[1,"alert-heading"],[1,"fa","fa-spin","fa-refresh","fa-2x"],[1,"mb-0"],[1,"col-8"],[1,"card-title"],[1,"card-subtitle"],[1,"col"],[1,"text-right"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-hospital-o"],[1,"table-responsive"],[1,"table","table-bordered"],[1,"w100"],[1,"w100","text-nowrap"],[4,"ngFor","ngForOf"],["alt","imagen",1,"avatar","cursor",3,"src","click"],["type","text","placeholder","Nombre del hospital",1,"form-control",3,"ngModel","ngModelChange"],[1,"text-nowrap","text-center"],["data-toggle","tooltip","data-original-title","Guardar cambios",1,"cursor",3,"click"],[1,"fa","fa-save","text-inverse","m-r-10"],["data-toggle","tooltip","data-original-title","Borrar",1,"cursor",3,"click"],[1,"fa","fa-close","text-danger"]],template:function(i,o){if(1&i){const s=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"input",4,5),t.NdJ("keyup",function(){t.CHM(s);const m=t.MAs(5);return t.KtG(o.buscar(m.value))}),t.qZA()()()()(),t.YNc(6,j,8,0,"div",6),t.YNc(7,K,27,2,"div",6)}2&i&&(t.xp6(6),t.Q6J("ngIf",o.cargando),t.xp6(1),t.Q6J("ngIf",!o.cargando))},dependencies:[a.Fj,a.JJ,d.sg,d.O5,a.On,f],encapsulation:2})}return r})(),q=(()=>{class r{constructor(e){this.http=e,this.base_url=g.a.base_url}get token(){return localStorage.getItem("token")||""}get headers(){return{headers:{"x-token":this.token}}}getMedicos(){return this.http.get(`${this.base_url}/medicos`,this.headers).pipe((0,h.U)(e=>e.medicos))}getMedicoById(e){return this.http.get(`${this.base_url}/medicos/${e}`,this.headers).pipe((0,h.U)(i=>i.medico))}crearMedico(e){return this.http.post(`${this.base_url}/medicos`,e,this.headers)}actualizarMedico(e){return this.http.put(`${this.base_url}/medicos/${e._id}`,e,this.headers)}borrarMedico(e){return this.http.delete(`${this.base_url}/medicos/${e}`,this.headers)}static#t=this.\u0275fac=function(i){return new(i||r)(t.LFG(Z.eN))};static#e=this.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function X(r,c){1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",7)(3,"h4",8),t._uU(4,"Cargando "),t.qZA(),t._UZ(5,"i",9),t.TgZ(6,"p",10),t._uU(7,"Por favor espere"),t.qZA()()()())}const D=function(r){return["/dashboard/medico",r]};function V(r,c){if(1&r){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"img",21),t.NdJ("click",function(){const s=t.CHM(e).$implicit,n=t.oxw(2);return t.KtG(n.abrirModal(s))}),t.ALo(3,"imagen"),t.qZA()(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td",22)(7,"a",23),t._UZ(8,"i",24),t.qZA(),t.TgZ(9,"a",25),t.NdJ("click",function(){const s=t.CHM(e).$implicit,n=t.oxw(2);return t.KtG(n.borrarMedico(s))}),t._UZ(10,"i",26),t.qZA()()()}if(2&r){const e=c.$implicit;t.xp6(2),t.Q6J("src",t.xi3(3,3,e.img,"medicos"),t.LSH),t.xp6(3),t.hij(" ",e.nombre,""),t.xp6(2),t.Q6J("routerLink",t.VKq(6,D,e._id))}}function W(r,c){if(1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",0)(5,"div",11)(6,"h4",12),t._uU(7,"Medicos"),t.qZA(),t.TgZ(8,"h6",13),t._uU(9,"Medicos registrados"),t.qZA()(),t.TgZ(10,"div",14)(11,"a",15),t._uU(12," Crear Medico "),t.qZA()()(),t.TgZ(13,"div",16)(14,"table",17)(15,"thead")(16,"tr")(17,"th",18),t._uU(18,"Foto"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"Nombre"),t.qZA(),t.TgZ(21,"th",19),t._uU(22,"Acciones"),t.qZA()()(),t.TgZ(23,"tbody"),t.YNc(24,V,11,8,"tr",20),t.qZA()()()()()()()),2&r){const e=t.oxw();t.xp6(24),t.Q6J("ngForOf",e.lista_medicos)}}let tt=(()=>{class r{constructor(e,i,o){this.medicosService=e,this.modalImagenService=i,this.busquedaService=o,this.lista_medicos=[],this.lista_medicos_tmp=[],this.cargando=!0}ngOnDestroy(){this.imgSubscription.unsubscribe()}ngOnInit(){this.cargarMedicos(),this.imgSubscription=this.modalImagenService.nuevaImagen.pipe((0,v.g)(100)).subscribe(e=>this.cargarMedicos())}cargarMedicos(){this.cargando=!0,this.medicosService.getMedicos().subscribe(e=>{this.lista_medicos=e,this.lista_medicos_tmp=e,this.cargando=!1})}buscarMedico(e){if(0===e.trim().length)return this.cargarMedicos();this.busquedaService.buscar("medicos",e).subscribe(i=>{this.lista_medicos=i})}abrirModal(e){this.modalImagenService.abrirModal("medicos",e._id,e.img),this.cargarMedicos()}borrarMedico(e){u().fire({title:"Esta seguro",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, borrar!"}).then(i=>{i.isConfirmed&&this.medicosService.borrarMedico(e._id).subscribe(()=>{this.cargarMedicos(),u().fire({title:"Borrado!",text:`${e.nombre} ha sido borrado`,icon:"success"})})})}static#t=this.\u0275fac=function(i){return new(i||r)(t.Y36(q),t.Y36(T.$),t.Y36(_))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-medicos"]],decls:8,vars:2,consts:[[1,"row"],[1,"col-12"],[1,"card"],[1,"card-body"],["type","text","placeholder","buscar medico...",1,"form-control",3,"keyup"],["txtValor",""],["class","row",4,"ngIf"],[1,"alert","alert-info","text-center"],[1,"alert-heading"],[1,"fa","fa-spin","fa-refresh","fa-2x"],[1,"mb-0"],[1,"col-8"],[1,"card-title"],[1,"card-subtitle"],[1,"col","text-right"],["routerLink","/dashboard/medico/nuevo",1,"btn","btn-primary"],[1,"table-responsive"],[1,"table","table-bordered"],[1,"100"],[1,"text-nowrap","w100"],[4,"ngFor","ngForOf"],[1,"cursor","avatar",3,"src","click"],[1,"text-nowrap","text-center"],["data-toggle","tooltip","data-original-title","Editar",3,"routerLink"],[1,"fa","fa-pencil","text-inverse","m-r-10"],["data-toggle","tooltip","data-original-title","Borrar",1,"cursor",3,"click"],[1,"fa","fa-close","text-danger"]],template:function(i,o){if(1&i){const s=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"input",4,5),t.NdJ("keyup",function(){t.CHM(s);const m=t.MAs(5);return t.KtG(o.buscarMedico(m.value))}),t.qZA()()()()(),t.YNc(6,X,8,0,"div",6),t.YNc(7,W,25,1,"div",6)}2&i&&(t.xp6(6),t.Q6J("ngIf",o.cargando),t.xp6(1),t.Q6J("ngIf",!o.cargando))},dependencies:[p.rH,d.sg,d.O5,f],encapsulation:2})}return r})();function et(r,c){if(1&r&&(t.TgZ(0,"div",7)(1,"label",8),t._uU(2,"Foto"),t.qZA(),t.TgZ(3,"div",9),t._UZ(4,"img",20),t.ALo(5,"imagen"),t.qZA()()),2&r){const e=t.oxw();t.xp6(4),t.Q6J("src",t.xi3(5,1,e.medicoSeleccionado.img,"medicos"),t.LSH)}}function it(r,c){if(1&r&&(t.TgZ(0,"option",21),t._uU(1),t.qZA()),2&r){const e=c.$implicit;t.Q6J("value",e._id),t.xp6(1),t.hij(" ",e.nombre,"")}}function rt(r,c){if(1&r&&(t.TgZ(0,"div",22)(1,"div",23)(2,"div",2)(3,"h4",3),t._uU(4,"Hospital"),t.qZA(),t.TgZ(5,"h6",4),t._uU(6),t.qZA(),t._UZ(7,"img",24),t.ALo(8,"imagen"),t.qZA()()()),2&r){const e=t.oxw();t.xp6(6),t.Oqu(e.hospitalSeleccionado.nombre),t.xp6(1),t.Q6J("src",t.xi3(8,2,e.hospitalSeleccionado.img||"x","hospitales"),t.LSH)}}let ot=(()=>{class r{ngOnInit(){this.formMedico=this.fb.group({nombre:["",a.kI.required],hospital:["",a.kI.required]}),this.cargarHospitales(),this.formMedico.get("hospital")?.valueChanges.subscribe(e=>{this.hospitalSeleccionado=this.lista_hospitales.find(i=>i._id===e)}),this.activatedRoute.params.subscribe(e=>{this.cargarMedico(e.id)})}constructor(e,i,o,s,n){this.fb=e,this.hospitalService=i,this.medicoService=o,this.router=s,this.activatedRoute=n,this.lista_hospitales=[]}cargarHospitales(){this.hospitalService.cargarHospitales().subscribe(e=>{this.lista_hospitales=e})}cargarMedico(e){"nuevo"!==e&&this.medicoService.getMedicoById(e).subscribe(i=>{if(!i)return void this.router.navigateByUrl("/dashboard/medicos");const{nombre:o,hospital:{_id:s}}=i;this.medicoSeleccionado=i,this.formMedico.setValue({nombre:o,hospital:s})})}obtenerMedicoById(e){this.medicoService.getMedicoById(e).subscribe(i=>{this.medicoSeleccionado=i})}guardarMedico(){if(this.medicoSeleccionado){const e={...this.formMedico.value,_id:this.medicoSeleccionado._id};this.medicoService.actualizarMedico(e).subscribe(i=>{console.log(i),u().fire({title:"Medico actualizado",text:`Se actualizo el medico ${i.medico.nombre}`,icon:"success"})})}else this.medicoService.crearMedico(this.formMedico.value).subscribe(e=>{u().fire({title:"Medico Creado",text:`Se creo el medico ${e.medico.nombre}`,icon:"success"}),this.router.navigateByUrl(`/dashboard/medico/${e.medico._id}`)})}static#t=this.\u0275fac=function(i){return new(i||r)(t.Y36(a.qu),t.Y36(A),t.Y36(q),t.Y36(p.F0),t.Y36(p.gz))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-medico"]],decls:28,vars:5,consts:[[1,"row"],[1,"col-6"],[1,"card-body"],[1,"card-title"],[1,"card-subtitle"],[1,"form","p-t-20",3,"formGroup"],["class","form-group",4,"ngIf"],[1,"form-group"],["for","exampleInputuname"],[1,"input-group"],[1,"input-group-addon"],[1,"ti-user"],["type","text","id","exampleInputuname","placeholder","Nombre del medico","formControlName","nombre",1,"form-control"],["for","exampleInputEmail1"],["formControlName","hospital",1,"form-control"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","text",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-save"],["class","col-6 animated fadeIn fast",4,"ngIf"],[1,"w100",3,"src"],[3,"value"],[1,"col-6","animated","fadeIn","fast"],[1,"card"],[1,"img-thumbnail",3,"src"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),t._uU(4,"Nuevo medico"),t.qZA(),t.TgZ(5,"h6",4),t._uU(6,"Actualizar informacion"),t.qZA(),t.TgZ(7,"form",5),t.YNc(8,et,6,4,"div",6),t.TgZ(9,"div",7)(10,"label",8),t._uU(11,"Nombre"),t.qZA(),t.TgZ(12,"div",9)(13,"div",10),t._UZ(14,"i",11),t.qZA(),t._UZ(15,"input",12),t.qZA()(),t.TgZ(16,"div",7)(17,"label",13),t._uU(18,"Hospital"),t.qZA(),t.TgZ(19,"div",9)(20,"select",14)(21,"option",15),t._uU(22,"Seleccione hospital"),t.qZA(),t.YNc(23,it,2,2,"option",16),t.qZA()()(),t.TgZ(24,"button",17),t.NdJ("click",function(){return o.guardarMedico()}),t.TgZ(25,"i",18),t._uU(26," Guardar "),t.qZA()()()()(),t.YNc(27,rt,9,5,"div",19),t.qZA()),2&i&&(t.xp6(7),t.Q6J("formGroup",o.formMedico),t.xp6(1),t.Q6J("ngIf",o.medicoSeleccionado),t.xp6(15),t.Q6J("ngForOf",o.lista_hospitales),t.xp6(1),t.Q6J("disabled",o.formMedico.invalid),t.xp6(3),t.Q6J("ngIf",o.hospitalSeleccionado))},dependencies:[a._Y,a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.JL,a.sg,a.u,d.sg,d.O5,f]})}return r})();function st(r,c){1&r&&(t.TgZ(0,"div",8)(1,"p",9),t._uU(2," no hay usuarios con ese termino "),t.qZA()())}function at(r,c){if(1&r&&(t.TgZ(0,"tr",10)(1,"td"),t._UZ(2,"img",11),t.ALo(3,"imagen"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA()()),2&r){const e=c.$implicit;t.xp6(2),t.Q6J("src",t.xi3(3,2,e.img,"usuarios"),t.LSH),t.xp6(3),t.Oqu(e.nombre)}}function nt(r,c){1&r&&(t.TgZ(0,"div",8)(1,"p",9),t._uU(2," no hay medicos con ese termino "),t.qZA()())}const ct=function(r){return["/dashboard/medico",r]};function lt(r,c){if(1&r&&(t.TgZ(0,"tr",10)(1,"td"),t._UZ(2,"img",11),t.ALo(3,"imagen"),t.qZA(),t.TgZ(4,"td")(5,"a",12),t._uU(6),t.qZA()()()),2&r){const e=c.$implicit;t.xp6(2),t.Q6J("src",t.xi3(3,3,e.img,"medicos"),t.LSH),t.xp6(3),t.Q6J("routerLink",t.VKq(6,ct,e._id)),t.xp6(1),t.hij(" ",e.nombre," ")}}function ut(r,c){1&r&&(t.TgZ(0,"div",8)(1,"p",9),t._uU(2," no hay hospitales con ese termino "),t.qZA()())}function dt(r,c){if(1&r&&(t.TgZ(0,"tr",10)(1,"td"),t._UZ(2,"img",11),t.ALo(3,"imagen"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA()()),2&r){const e=c.$implicit;t.xp6(2),t.Q6J("src",t.xi3(3,2,e.img,"hospitales"),t.LSH),t.xp6(3),t.hij(" ",e.nombre," ")}}const pt=[{path:"",component:M,data:{titulo:"Dasboard"}},{path:"perfil",component:H,data:{titulo:"Perfil"}},{path:"buscar/:termino",component:(()=>{class r{constructor(e,i){this.activatedRoute=e,this.busquedaService=i,this.terminoBusqueda="",this.lista_usuarios=[],this.lista_medicos=[],this.lista_hospitales=[]}ngOnInit(){this.obtenerParametroBusqueda()}obtenerParametroBusqueda(){this.activatedRoute.params.subscribe(e=>{this.terminoBusqueda=e.termino,this.busquedaGlobal(this.terminoBusqueda)})}busquedaGlobal(e){this.busquedaService.buscarGlobal(e).subscribe(i=>{this.lista_usuarios=i.usuarios,this.lista_hospitales=i.hospitales,this.lista_medicos=i.medicos})}abrirMedico(e){}static#t=this.\u0275fac=function(i){return new(i||r)(t.Y36(p.gz),t.Y36(_))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-busqueda"]],decls:49,vars:6,consts:[[1,"row","animated","fadeIn","fast"],[1,"col-4"],[1,"card"],[1,"card-body"],["class","alert alert-info animated fadeIn fast",4,"ngIf"],[1,"table-responsive"],[1,"table"],["class","animated fadeIn fast",4,"ngFor","ngForOf"],[1,"alert","alert-info","animated","fadeIn","fast"],[1,"mb-0"],[1,"animated","fadeIn","fast"],[1,"w100",3,"src"],[3,"routerLink"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3"),t._uU(5,"Usuarios"),t.qZA(),t.YNc(6,st,3,0,"div",4),t.TgZ(7,"div",5)(8,"table",6)(9,"thead")(10,"tr")(11,"th"),t._uU(12,"Avatar"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Nombre"),t.qZA()()(),t.TgZ(15,"tbody"),t.YNc(16,at,6,5,"tr",7),t.qZA()()()()()(),t.TgZ(17,"div",1)(18,"div",2)(19,"div",3)(20,"h3"),t._uU(21,"Medicos"),t.qZA(),t.YNc(22,nt,3,0,"div",4),t.TgZ(23,"div",5)(24,"table",6)(25,"thead")(26,"tr")(27,"th"),t._uU(28,"Foto"),t.qZA(),t.TgZ(29,"th"),t._uU(30,"Nombre"),t.qZA()()(),t.TgZ(31,"tbody"),t.YNc(32,lt,7,8,"tr",7),t.qZA()()()()()(),t.TgZ(33,"div",1)(34,"div",2)(35,"div",3)(36,"h3"),t._uU(37,"Hospitales"),t.qZA(),t.YNc(38,ut,3,0,"div",4),t.TgZ(39,"div",5)(40,"table",6)(41,"thead")(42,"tr")(43,"th"),t._uU(44,"Foto"),t.qZA(),t.TgZ(45,"th"),t._uU(46,"Nombre"),t.qZA()()(),t.TgZ(47,"tbody"),t.YNc(48,dt,6,5,"tr",7),t.qZA()()()()()()()),2&i&&(t.xp6(6),t.Q6J("ngIf",0===o.lista_usuarios.length),t.xp6(10),t.Q6J("ngForOf",o.lista_usuarios),t.xp6(6),t.Q6J("ngIf",0===o.lista_medicos.length),t.xp6(10),t.Q6J("ngForOf",o.lista_medicos),t.xp6(6),t.Q6J("ngIf",0===o.lista_medicos.length),t.xp6(10),t.Q6J("ngForOf",o.lista_hospitales))},dependencies:[p.rH,d.sg,d.O5,f],encapsulation:2})}return r})(),data:{titulo:"Busquedas"}},{path:"grafica1",component:y,data:{titulo:"Grafica"}},{path:"progress",component:J,data:{titulo:"Progress"}},{path:"promesas",component:S,data:{titulo:"Promesas"}},{path:"rxjs",component:k,data:{titulo:"Rxjs"}},{path:"hospitales",component:R,data:{titulo:"Hospitales"}},{path:"medicos",component:tt,data:{titulo:"Medicos"}},{path:"medico/:id",component:ot,data:{titulo:"Medico"}},{path:"usuarios",canActivate:[(r,c)=>{const e=(0,t.f3M)(b.i),i=(0,t.f3M)(p.F0);return"ADMIN_ROLE"===e.role||(i.navigate(["/dashboard"]),!1)}],component:L,data:{titulo:"Usuarios de aplicacion"}}];let mt=(()=>{class r{static#t=this.\u0275fac=function(i){return new(i||r)};static#e=this.\u0275mod=t.oAB({type:r});static#i=this.\u0275inj=t.cJS({imports:[p.Bz.forChild(pt),p.Bz]})}return r})()}}]);